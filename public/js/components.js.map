{"version":3,"sources":["_avatar.js","_character-counter.js","_cover.js","_dialog.js","_dropdown.js","_ellipsis.js","_event.tap.js","_flash.js","_global.js","_increment.js","_like.js","_livelink.js","_loadmore.js","_menu.js","_orientate.js","_preview.js","_slider.js","_splash.js","_tabbing.js","form/_autosuggest.js","form/_collection.js","form/_formchanged.js","form/_liveform.js","form/_parse.js","form/_realval.js","form/_textarea.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"components.js","sourcesContent":["/**\n * avatar.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'avatar',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\tvar $avatar = $(this.element);\n\t\t\t$(window).resize(function() {\n\t\t\t\tplugin.resize();\n\t\t\t});\n\n\t\t\t// trigger initial resize\n\t\t\t//plugin.resize();\n\t\t},\n\n\t\tresize: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\n\t\t\t// don't do anything if img tag\n\t\t\tif($avatar.find('img').length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// get frame dimensions\n\t\t\tvar wF = $avatar.parent().width();\n\t\t\tvar hF = $avatar.parent().height();\n\n\t\t\t// calculate\n\t\t\tvar ratio =  wF / $avatar.data('wc');\n\t\t\tvar bgSize = ratio * $avatar.data('wi');\n\t\t\tvar bgLeft = ratio * $avatar.data('xc') * -1;\n\t\t\tvar bgTop  = ratio * $avatar.data('yc') * -1;\n\n\t\t\t$avatar.css('background-image', 'url(' + $avatar.data('image') + ')');\n\t\t\t$avatar.css('background-size', bgSize + 'px');\n\t\t\t$avatar.css('background-position', bgLeft + 'px ' + bgTop + 'px');\n\t\t},\n\n\t\tsetImage: function(image, cropX, cropY, cropW, cropH) {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\n\t\t\t// extract values\n\t\t\tvar w = null;\n\t\t\tvar h = null;\n\t\t\tif(typeof(image) == 'object' && image.url != undefined) {\n\t\t\t\tw = image.w || null;\n\t\t\t\th = image.h || null;\n\t\t\t\timage = image.url;\n\t\t\t}\n\t\t\t$avatar.data('image', image);\n\n\t\t\t// if no or incomplete cropping information, just render an img tag\n\t\t\tif(!(!!cropX && !!cropY && !!cropW && !!cropH)) {\n\t\t\t\tplugin.showImgTag(image);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// set crop info\n\t\t\tplugin.setCrop(cropX, cropY, cropW, cropH);\n\t\t\t$avatar.find('img').remove();\n\n\t\t\t// calculate real image dimensions, this is async so we need to wrap after functionality in a callback\n\t\t\tif(w == null || h == null) {\n\t\t\t\tplugin.calculateDimensions(image, function(width, height) {\n\t\t\t\t\t$avatar.data('wi', width);\n\t\t\t\t\t$avatar.data('hi', height);\n\t\t\t\t\tplugin.resize();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$avatar.data('wi', w);\n\t\t\t\t$avatar.data('hi', h);\n\t\t\t\tplugin.resize();\n\t\t\t}\n\t\t},\n\n\t\tcalculateDimensions: function(image, callback) {\n\t\t\tvar $image = $('<img style=\"pointer-events:none;opacity:0;position:absolute;top:0;max-width:none;max-height:none;\" />').attr('src', image);\n\t\t\t$image.load(function() {\n\t\t\t\tcallback($(this).width(), $(this).height()); // call callback function\n\t\t\t\t$(this).remove();\n\t\t\t}).appendTo('body');\n\t\t},\n\n\t\tsetCrop: function(cropX, cropY, cropW, cropH) {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\t\t\t$avatar.data('xc', cropX);\n\t\t\t$avatar.data('yc', cropY);\n\t\t\t$avatar.data('wc', cropW);\n\t\t\t$avatar.data('hc', cropH);\n\n\t\t\tplugin.resize();\n\t\t},\n\n\t\tshowImgTag: function(image) {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\n\t\t\t// clear styles, add img tag\n\t\t\t$avatar.attr('css', '');\n\t\t\t$avatar.append($('<img class=\"avatar\" />').attr('src', image));\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * character-counter.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'characterCounter',\n\t\t\tdefaults = {\n\t\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// events\n\n\t\t\t// change input: recalculate\n\t\t\tvar $counter = $(this.element);\n\t\t\tvar $input = $($counter.data('content'));\n\t\t\t$input.bind('input change blur keyup', function(e) {\n\t\t\t\tplugin.refresh();\n\t\t\t});\n\t\t\tplugin.refresh();\n\t\t},\n\n\t\trefresh: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar $counter = $(this.element);\n\t\t\tvar $input = $($counter.data('content'));\n\t\t\t//var length = $input.val().length;\n\t\t\tvar length = $input.realText().length;\n\t\t\tvar caption = $counter.data('caption');\n\t\t\tcaption = caption.replace('%d', length);\n\t\t\tif(length == 1) {\n\t\t\t\tcaption = caption.replace(' characters ', ' character ');\n\t\t\t}\n\t\t\t$counter.text(caption);\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * cover.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'cover',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\tvar $avatar = $(this.element);\n\t\t\t$(window).resize(function() {\n\t\t\t\tplugin.resize();\n\t\t\t});\n\n\t\t\t// trigger initial resize\n\t\t\tplugin.resize();\n\t\t},\n\n\t\tresize: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\n\t\t\t// don't do anything if img tag\n\t\t\tif($avatar.find('img').length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// get frame dimensions\n\t\t\tvar wF = $avatar.parent().width();\n\t\t\tvar hF = $avatar.parent().height();\n\n\t\t\t// calculate\n\t\t\tvar ratio =  wF / $avatar.data('wc');\n\t\t\tvar bgSize = ratio * $avatar.data('wi');\n\t\t\tvar bgLeft = ratio * $avatar.data('xc') * -1;\n\t\t\tvar bgTop  = ratio * $avatar.data('yc') * -1;\n\n\t\t\t$avatar.css('background-image', 'url(' + $avatar.data('image') + ')');\n\t\t\t$avatar.css('background-size', bgSize + 'px');\n\t\t\t$avatar.css('background-position', bgLeft + 'px ' + bgTop + 'px');\n\t\t},\n\n\t\tsetImage: function(image, cropX, cropY, cropW, cropH) {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\n\t\t\t// extract values\n\t\t\tvar w = null;\n\t\t\tvar h = null;\n\t\t\tif(typeof(image) == 'object' && image.url != undefined) {\n\t\t\t\tw = image.w || null;\n\t\t\t\th = image.h || null;\n\t\t\t\timage = image.url;\n\t\t\t}\n\t\t\t$avatar.data('image', image);\n\n\t\t\t// if no or incomplete cropping information, just render an img tag\n\t\t\tif(!(!!cropX && !!cropY && !!cropW && !!cropH)) {\n\t\t\t\tplugin.showImgTag(image);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// set crop info\n\t\t\tplugin.setCrop(cropX, cropY, cropW, cropH);\n\t\t\t$avatar.find('img').remove();\n\n\t\t\t// calculate real image dimensions, this is async so we need to wrap after functionality in a callback\n\t\t\tif(w == null || h == null) {\n\t\t\t\tplugin.calculateDimensions(image, function(width, height) {\n\t\t\t\t\t$avatar.data('wi', width);\n\t\t\t\t\t$avatar.data('hi', height);\n\t\t\t\t\tplugin.resize();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$avatar.data('wi', w);\n\t\t\t\t$avatar.data('hi', h);\n\t\t\t\tplugin.resize();\n\t\t\t}\n\t\t},\n\n\t\tcalculateDimensions: function(image, callback) {\n\t\t\tvar $image = $('<img style=\"pointer-events:none;opacity:0;position:absolute;top:0;max-width:none;max-height:none;\" />').attr('src', image);\n\t\t\t$image.load(function() {\n\t\t\t\tcallback($(this).width(), $(this).height()); // call callback function\n\t\t\t\t$(this).remove();\n\t\t\t}).appendTo('body');\n\t\t},\n\n\t\tsetCrop: function(cropX, cropY, cropW, cropH) {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\t\t\t$avatar.data('xc', cropX);\n\t\t\t$avatar.data('yc', cropY);\n\t\t\t$avatar.data('wc', cropW);\n\t\t\t$avatar.data('hc', cropH);\n\n\t\t\tplugin.resize();\n\t\t},\n\n\t\tshowImgTag: function(image) {\n\t\t\tvar plugin = this;\n\t\t\tvar $avatar = $(this.element);\n\n\t\t\t// clear styles, add img tag\n\t\t\t$avatar.attr('css', '');\n\t\t\t$avatar.append($('<img class=\"avatar\" />').attr('src', image));\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * dialog.js\n */\n/*\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'dialog',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tthis.setup();\n\n\t\t\tvar plugin = this;\n\n\t\t\t$(this.element).on('click', '.dialog__trigger', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar $trigger = $(this);\n\t\t\t\tvar id = $trigger.data('dialog-content');\n\t\t\t\tvar $content = $('#' + id);\n\t\t\t\t$('.dialog').trigger('show', [$content, id, $trigger]);\n\t\t\t});\n\n\t\t\t// https://github.com/valtido/jQuery-mutate\n\t\t\t/*var $content = $('<div class=\"dialog__overlay__content\"></div>');\n\t\t\t$(window).mutate('width height', function(el, info) {\n\t\t\t\tplugin.setOffset($content);\n\t\t\t});*/\n\t\t},\n\n\t\tsetup: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// create elements\n\n\t\t\tvar $dialog = $('.dialog');\n\t\t\tvar $content = $dialog.find('.dialog__overlay__content');\n\t\t\tif($dialog.length == 0) {\n\t\t\t\t$dialog = $('<div class=\"dialog\"></div>');\n\t\t\t\t$content = $('<div class=\"dialog__overlay__content\"></div>');\n\t\t\t\tvar $underlay = $('<div class=\"dialog__underlay\"></div>');\n\t\t\t\tvar $overlay = $('<div class=\"dialog__overlay\"></div>');\n\t\t\t\t$dialog.append($underlay);\n\t\t\t\t$dialog.append($overlay);\n\t\t\t\t$overlay.append($content);\n\t\t\t\t$(this.element).append($dialog);\n\t\t\t}\n\n\t\t\t// events\n\t\t\t$dialog.unbind();\n\n\t\t\t$dialog.on('click', '.dialog__close', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$('.dialog').trigger('hide');\n\t\t\t});\n\n\t\t\t$dialog.bind('show', function(e, content, id, trigger, callback) {\n\t\t\t\tvar $dialog = $(this);\n\t\t\t\t$dialog.find('.dialog__overlay__content').empty().append(content.children());\n\t\t\t\tvar offset = 0;\n\t\t\t\tif($('body').scrollTop() != 0) {\n\t\t\t\t\toffset = Math.abs($('body').scrollTop());\n\t\t\t\t} else if($('#wrapper').scrollTop() != 0) {\n\t\t\t\t\toffset = Math.abs($('#wrapper').scrollTop());\n\t\t\t\t} else if($('#wrapper').offset().top != 0) {\n\t\t\t\t\toffset = Math.abs($('#wrapper').offset().top);\n\t\t\t\t}\n\t\t\t\t$dialog.data('offset-top', offset);\n\t\t\t\t$dialog.addClass('--animating');\n\t\t\t\t$dialog.addClass('--active');\n\t\t\t\t$('html').addClass('--dialog-active');\n\t\t\t\t$dialog.data('dialog-original-content', content);\n\t\t\t\tplugin.setOffset($('.dialog__overlay__content'));\n\t\t\t\tvar t = setTimeout(function() {\n\t\t\t\t\t//plugin.setOffset($('.dialog__overlay__content'));\n\t\t\t\t\t$dialog.removeClass('--animating');\n\t\t\t\t}, 200);\n\n\t\t\t\t// touch tabbing that is in the dialog\n\t\t\t\t$dialog.find('.tabbing').trigger('change');\n\t\t\t\t$dialog.trigger('show-complete', [content, id, trigger]);\n\t\t\t\tif(callback) {\n\t\t\t\t\tcallback.call($dialog.get(0), content, id, trigger);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$dialog.bind('hide', function(e) {\n\t\t\t\tvar $dialog = $(this);\n\t\t\t\t$dialog.addClass('--animating');\n\t\t\t\t$dialog.removeClass('--active');\n\t\t\t\t$('html').removeClass('--dialog-active');\n\t\t\t\tif($dialog.data('offset-top') && !isNaN($dialog.data('offset-top'))) {\n\t\t\t\t\t$('html, body').animate({ scrollTop: $dialog.data('offset-top') }, 100);\n\t\t\t\t}\n\t\t\t\tvar t = setTimeout(function() {\n\t\t\t\t\t$($dialog.data('dialog-original-content')).append($dialog.find('.dialog__overlay__content').children());\n\t\t\t\t\t$dialog.removeClass('--animating');\n\t\t\t\t}, 200);\n\t\t\t});\n\n\t\t\t// https://github.com/valtido/jQuery-mutate\n\t\t\t$content.mutate('width height', function(el, info) {\n\t\t\t\tplugin.setOffset($content);\n\t\t\t});\n\t\t\t$(window).mutate('width height', function(el, info) {\n\t\t\t\tplugin.setOffset($content);\n\t\t\t});\n\t\t},\n\n\t\tsetOffset: function(el) {\n\t\t\tvar content = $(el).height();\n\t\t\tvar overlay = $(el).parents('.dialog__overlay').height();\n\t\t\tvar viewport = $(window).height();\n\t\t\tvar width = $(window).width();\n\t\t\tvar offsetTop = (width > 600) ? ((viewport - Math.min(content, overlay)) / 2) : 0;\n\t\t\t$('.dialog__overlay').css('top', offsetTop);\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t} else {\n\t\t\t\t$.data(this, 'plugin_' + pluginName).setup();\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * dropdown.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Plugin for dropdown objects\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'dropdown',\n\t\t\tdefaults = {\n\t\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// init post comments\n\t\t\t//$(this.element).find('.comment-write form').commentwrite();\n\n\t\t\t$(this.element).not('.--frozen').each(function() {\n\t\t\t\tvar $dropdown = $(this);\n\t\t\t\tvar target = $(this).data('dropdown-target');\n\t\t\t\tif(target) {\n\t\t\t\t\tvar $triggers = $(':not(.dropdown) > .dropdown__trigger').filter(function() {\n\t\t\t\t\t\treturn $(this).attr('href') == '#' + target;\n\t\t\t\t\t});\n\t\t\t\t\t$triggers.on('click', function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t//e.stopPropagation();\n\t\t\t\t\t\t$dropdown.trigger('toggle');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(this.element).not('.--frozen').find('.dropdown__trigger').on('click', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\t//e.stopPropagation();\n\t\t\t\t$(this).parents('.dropdown').trigger('toggle');\n\t\t\t});\n\n\t\t\t$(this.element).not('.--frozen').bind('toggle', function(e) {\n\t\t\t\tvar $dropdown = $(this);\n\t\t\t\t$dropdown.toggleClass('--active');\n\n\t\t\t\tvar target = $(this).data('dropdown-target');\n\t\t\t\tif(target && !$dropdown.hasClass('--pulldown')) {\n\t\t\t\t\tvar $trigger = $(':not(.dropdown) > .dropdown__trigger').filter(function() {\n\t\t\t\t\t\treturn $(this).attr('href') == '#' + target;\n\t\t\t\t\t});\n\t\t\t\t\t$trigger.toggleClass('--active', $dropdown.hasClass('--active'));\n\t\t\t\t\tif($dropdown.hasClass('--active')) {\n\t\t\t\t\t\t$dropdown.trigger('opened');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$dropdown.trigger('closed');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// close others in same group\n\t\t\t\tvar group = $dropdown.data('dropdown-group');\n\t\t\t\tif(group != undefined && group != null) {\n\t\t\t\t\t$('.dropdown').filter(function() {\n\t\t\t\t\t\treturn $(this).data('dropdown-group') == group && this !== $dropdown.get(0);\n\t\t\t\t\t}).trigger('close');\n\t\t\t\t}\n\n\t\t\t\t// opening for pulldowns\n\t\t\t\tif($dropdown.hasClass('--pulldown')) {\n\t\t\t\t\tvar height = $dropdown.find('.dropdown__content > *').outerHeight();\n\t\t\t\t\tif($dropdown.hasClass('--active')) {\n\t\t\t\t\t\t$dropdown.find('.dropdown__content').height(height);\n\t\t\t\t\t\tvar t = setTimeout(function() {\n\t\t\t\t\t\t\t$dropdown.addClass('--open');\n\t\t\t\t\t\t}, 350);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$dropdown.find('.dropdown__content').height(height);\n\t\t\t\t\t\t$dropdown.removeClass('--open');\n\t\t\t\t\t\t$dropdown.find('.dropdown__content').height(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(this.element).not('.--frozen').bind('close', function() {\n\t\t\t\tvar $dropdown = $(this);\n\t\t\t\tvar isOpen = $dropdown.hasClass('--active');\n\t\t\t\t$dropdown.removeClass('--active');\n\n\t\t\t\tvar target = $(this).data('dropdown-target');\n\t\t\t\tif(target && !$dropdown.hasClass('--pulldown')) {\n\t\t\t\t\tvar $trigger = $(':not(.dropdown) > .dropdown__trigger').filter(function() {\n\t\t\t\t\t\treturn $(this).attr('href') == '#' + target;\n\t\t\t\t\t});\n\t\t\t\t\t$trigger.removeClass('--active');\n\t\t\t\t}\n\n\t\t\t\tif($dropdown.hasClass('--pulldown')) {\n\t\t\t\t\t$dropdown.find('.dropdown__content').height(0);\n\t\t\t\t}\n\n\t\t\t\tif(isOpen) {\n\t\t\t\t\t$dropdown.trigger('closed');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);\n\n/**\n * dropdown.js\n */\njQuery(function($) {\n\n\t// hit test for close\n\t$('body').bind('hit-test', function(e, elements) {\n\t\t$('.dropdown:not(.--frozen):not(.--pulldown)').each(function() {\n\t\t\tvar $dropdown = $(this);\n\t\t\tvar target = $dropdown.data('dropdown-target');\n\t\t\tvar $trigger = [];\n\t\t\tif(target) {\n\t\t\t\t$trigger = $('.dropdown__trigger').filter(function() {\n\t\t\t\t\treturn $(this).attr('href') == '#' + target && $.inArray(this, elements) !== -1;\n\t\t\t\t});\n\t\t\t}\n\t\t\t// make note hit test should exempt dialogs\n\t\t\tvar inDialog = ($.inArray($('.dialog').get(0), elements) != -1);\n\t\t\tif($.inArray($dropdown.get(0), elements) == -1 && $trigger.length == 0 && !inDialog) {\n\t\t\t\t$dropdown.trigger('close');\n\t\t\t}\n\t\t});\n\t});\n});","/**\n * ellipsis.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'ellipsis',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\tvar $ellipsis = $(this.element);\n\t\t\t$(window).resize(function() {\n\t\t\t\tplugin.resize($ellipsis);\n\t\t\t});\n\n\t\t\t// trigger initial resize\n\t\t\tplugin.resize($ellipsis);\n\t\t},\n\n\t\tresize: function($ellipsis) {\n\t\t\t$ellipsis.css('width', 0);\n\t\t\tvar t = setTimeout(function() {\n\t\t\t\tvar width = $ellipsis.parent().outerWidth();\n\t\t\t\t$ellipsis.css('width', width);\n\t\t\t}, 10);\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","$.event.special.tap = {\n\tsetup: function() {\n\t\tvar self = this,\n\t\t\t$self = $(self);\n\n\t\t// Bind touch start\n\t\t$self.on('touchstart', function(startEvent) {\n\t\t\t// Save the target element of the start event\n\t\t\tvar target = startEvent.target;\n\n\t\t\t// When a touch starts, bind a touch end handler exactly once,\n\t\t\t$self.one('touchend', function(endEvent) {\n\t\t\t\t// When the touch end event fires, check if the target of the\n\t\t\t\t// touch end is the same as the target of the start, and if\n\t\t\t\t// so, fire a click.\n\t\t\t\tif (target == endEvent.target) {\n\t\t\t\t\t$.event.simulate('tap', self, endEvent);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n};\n\n$('body').on('tap', 'a', function() {\n\t//$('#layout-header').toggleClass('hidden');\n});","/**\n * flash.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'flash',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// trigger initial show\n\t\t\tplugin.show();\n\t\t},\n\n\t\tshow: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar $element = $(this.element);\n\t\t\t$element.find('.flash').each(function(index) {\n\t\t\t\tvar $item = $(this);\n\t\t\t\tvar lag = index * 400;\n\t\t\t\tvar t = setTimeout(function() {\n\t\t\t\t\t$item.addClass('--active');\n\t\t\t\t}, lag);\n\t\t\t});\n\t\t},\n\n\t\trefresh: function(flashes) {\n\t\t\tvar plugin = this;\n\t\t\tvar $element = $(this.element);\n\t\t\t$element.empty();\n\t\t\tfor(var i in flashes) {\n\t\t\t\tvar flash = flashes[i];\n\t\t\t\tvar $item = $('<div class=\"flash\">');\n\t\t\t\t$item.attr('id', 'flash_' + i);\n\t\t\t\t$item.addClass('--' + flash.type);\n\t\t\t\t$item.text(flash.message);\n\t\t\t\t$element.append($item);\n\t\t\t}\n\t\t\tplugin.show();\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * global.js\n */\njQuery(function($) {\n\t// Hit detection for clicks\n\t$('body').click(function(e) {\n\t\tvar $heirarchy = $(e.target).parents();\n\t\t$(this).trigger('hit-test', [$heirarchy]);\n\t});\n});","/**\n * increment.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'increment',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar element = this.element;\n\n\t\t\t// set element status\n\t\t\tif($(element).css('position') == 'static') {\n\t\t\t\t$(element).css('position', 'relative');\n\t\t\t}\n\n\t\t\t// handle clicks\n\t\t\t$(element).on('increment', function(e) {\n\t\t\t\te.stopPropagation(); // make sure parent items don't receive this event\n\n\t\t\t\tvar $incr = $(this);\n\t\t\t\tvar points = $incr.data('points');\n\t\t\t\tvar incremented = typeof($incr.data('incremented')) != 'undefined' ? $incr.data('incremented') : ':not(:visible)';\n\n\t\t\t\t// check if first incremented\n\t\t\t\tif($incr.is(incremented) || typeof(points) == 'undefined') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// insert points\n\t\t\t\tvar $points = $('<span class=\"incrementer__points\">+' + points + '</span>');\n\t\t\t\t$incr.append($points);\n\n\t\t\t\t// animate and remove\n\t\t\t\tvar t = setTimeout(function() {\n\t\t\t\t\t$points.addClass('--incrementing');\n\t\t\t\t}, 35);\n\t\t\t\tvar t2 = setTimeout(function() {\n\t\t\t\t\t$points.remove();\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * like.js\n */\njQuery(function($) {\n\t$('body').on('click', '.like', function(e) {\n\t\te.preventDefault();\n\t\t$(this).trigger('increment');\n\t\t$(this).toggleClass('--active');\n\t});\n});","/**\n * liveform.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Plugin for live-link objects\n *\n * Dependencies:\n * _parse.js\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'livelink',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar loadCallback = function(html, status, xhr) {\n\t\t\t\tvar $info = $(html).find('#mainContainer').parents('#wrapper');\n\t\t\t\tvar url = $info.data('url');\n\t\t\t\tvar options = xhr.livelink !== undefined ? xhr.livelink : {};\n\n\t\t\t\t// close any dialogs/splashes\n\t\t\t\t$('.dialog').trigger('hide');\n\t\t\t\t$('.splash').trigger('hide');\n\n\t\t\t\t// update history\n\t\t\t\t// support checking xhr.history to see if we should not alter history\n\t\t\t\tif(window.location.protocol !== 'file:' && window.location.hostname !== '') {\n\t\t\t\t\tif(xhr.history !== false) {\n\t\t\t\t\t\thistory.pushState({href: url}, null, url);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thistory.replaceState({href: url}, null, url);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// load layout\n\t\t\t\t// header\n\t\t\t\tvar $lh = $('#layout-header').css('background-color', $(html).find('#layout-header').css('background-color'));\n\t\t\t\tvar $h = $(html).find('#headerContainer');\n\t\t\t\t$lh.toggleClass('--hidden', $info.is('[no-header=true]'));\n\t\t\t\tif($h.length) {\n\t\t\t\t\t$('#headerContainer').html($h.html());\n\t\t\t\t}\n\n\t\t\t\t// flash\n\t\t\t\tvar $fl = $(html).find('#flash-container');\n\t\t\t\t$fl.toggleClass('--hidden', $info.is('[no-flash=true]'));\n\t\t\t\tif($fl.length) {\n\t\t\t\t\t$('#flash-container').replaceWith($fl);\n\t\t\t\t}\n\n\t\t\t\t// footer\n\t\t\t\tvar $lf = $('#layout-footer');\n\t\t\t\tvar $f = $(html).find('#footerContainer');\n\t\t\t\t$lf.toggleClass('--hidden', $info.is('[no-footer=true]'));\n\t\t\t\tif($f.length) {\n\t\t\t\t\t$('#footerContainer').css('background-color', $f.css('background-color')).html($f.html());\n\t\t\t\t}\n\n\t\t\t\t// content\n\t\t\t\t$('#layout-content').attr('class', $(html).find('#layout-content').attr('class'));\n\n\t\t\t\t// load container contents into main container\n\t\t\t\t$('#mainContainer').html($(html).find('#mainContainer').html());\n\n\t\t\t\t// load body class attribute\n\t\t\t\tvar bodyClass = $info.data('page-template');\n\t\t\t\tif(typeof(options.bodyClass) !== 'undefined') {\n\t\t\t\t\tbodyClass = options.bodyClass;\n\t\t\t\t}\n\n\t\t\t\t// get member role\n\t\t\t\tvar memberRole = $info.data('member-role');\n\n\t\t\t\tbodyClass = 'layout ' + bodyClass + ' ' + memberRole;\n\t\t\t\t$('body').attr('class', bodyClass);\n\n\t\t\t\t// run page init code\n\t\t\t\tfor(var page in app) {\n\t\t\t\t\tvar pageCallback = app[page];\n\t\t\t\t\tpageCallback($);\n\t\t\t\t}\n\n\t\t\t\t// scroll page\n\t\t\t\tif(xhr.history !== false) {\n\t\t\t\t\t$('html, body').animate({ scrollTop: 0 }, 100);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// link click\n\t\t\t$(this.element).on('click', 'a', function(e) {\n\t\t\t\tif(!($(this).data('internal') !== undefined && $(this).data('internal') == true)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\tvar href = $(this).attr('href');\n\n\t\t\t\t// check dirty forms\n\t\t\t\tvar $dirty = $('form').filter('.dirty');\n\t\t\t\tif($dirty.size() > 0) {\n\t\t\t\t\tvar r = confirm($dirty.data('areyousure-message'));\n\t\t\t\t\tif(r !== true) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// close menu\n\t\t\t\t$('#layout-header .menu').trigger('close');\n\n\t\t\t\t// link options\n\t\t\t\tvar options = {};\n\t\t\t\toptions['bodyClass'] = $(this).data('body-class') !== undefined ? $(this).data('body-class') : undefined;\n\n\t\t\t\tconsole.log('link click: ' + href);\n\t\t\t\tvar xhr = $.ajax(href, {\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: loadCallback\n\t\t\t\t});\n\t\t\t\txhr.livelink = options;\n\t\t\t});\n\n\t\t\t// form submission\n\t\t\t$(this.element).on('submit', 'form', function(e) {\n\t\t\t\tif(!($(this).data('internal') !== undefined && $(this).data('internal') == true)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\tvar action = $(this).attr('action');\n\t\t\t\tvar method = $(this).attr('method');\n\n\t\t\t\t// get params\n\t\t\t\tvar params = $(this).parse(); // call dependent plugin function\n\t\t\t\tif($(this).data('form-submit-action') !== undefined) {\n\t\t\t\t\tparams['action'] = $(this).data('form-submit-action');\n\t\t\t\t}\n\n\t\t\t\tconsole.log('form submit: ' + action);\n\t\t\t\tvar xhr = $.ajax(action, {\n\t\t\t\t\ttype: method,\n\t\t\t\t\tdata: params,\n\t\t\t\t\tsuccess: loadCallback\n\t\t\t\t});\n\t\t\t\txhr.livelink = {};\n\t\t\t});\n\n\t\t\t// redirect via window.location\n\t\t\t$(this.element).on('redirect', function(e, url) {\n\t\t\t\tconsole.log('redirect: ' + url);\n\t\t\t\tvar xhr = $.ajax(url, {\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: loadCallback\n\t\t\t\t});\n\t\t\t\txhr.livelink = {};\n\t\t\t});\n\n\t\t\t// history back\n\t\t\t$(this.element).on('back', function(e, url) {\n\t\t\t\tconsole.log('back: ' + url);\n\t\t\t\tconsole.log('-----');\n\t\t\t\tvar xhr = $.ajax(url, {\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: loadCallback\n\t\t\t\t});\n\t\t\t\txhr.history = false;\n\t\t\t\txhr.livelink = {};\n\t\t\t});\n\n\t\t\t// external links (phonegap only)\n\t\t\t// http://stackoverflow.com/questions/17887348/phonegap-open-link-in-browser\n\t\t\tif(is_phonegap) {\n\t\t\t\t$(this.element).on('click', 'a[target=_blank]', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar href = $(this).attr('href');\n\t\t\t\t\twindow.open(href, '_system', 'location=yes');\n\t\t\t\t\t//return false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * loadmore.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'loadmore',\n\t\t\tdefaults = {\n\t\t\t\tinjectMethod: 'append', // prepend, append\n\t\t\t\tdataType: 'html',\n\t\t\t\tcallback: $.noop,\n\t\t\t\tlistType: 'linear' // linear, grouped\n\t\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar element = this.element;\n\t\t\tvar collection = this.options.collection;\n\t\t\tvar dataType = this.options.dataType;\n\t\t\tvar injectMethod = this.options.injectMethod;\n\t\t\tvar callback = this.options.callback;\n\t\t\tvar listType = this.options.listType;\n\n\t\t\t// trigger\n\t\t\tvar trigger = this.options.trigger;\n\t\t\tvar $trigger = $(trigger);\n\n\t\t\t// handle clicks\n\t\t\t$trigger.on('click', function (e, $trigger) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// if already loading, do nothing\n\t\t\t\tif($(this).hasClass('--loading')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$(this).addClass('--loading');\n\n\t\t\t\t// load results\n\t\t\t\tvar href = $(this).attr('href');\n\t\t\t\t$.ajax(href, {\n\t\t\t\t\tdataType: dataType,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tvar $loaded = $(data).find(collection).children();\n\t\t\t\t\t\tvar $current = $(element).children();\n\n\t\t\t\t\t\t// insert each element - linear\n\t\t\t\t\t\tif(listType == 'linear') {\n\t\t\t\t\t\t\t$loaded.each(function() {\n\t\t\t\t\t\t\t\tvar $new = $(this);\n\t\t\t\t\t\t\t\tvar id = $new.data('id');\n\n\t\t\t\t\t\t\t\t// find old element\n\t\t\t\t\t\t\t\tvar $match = $current.filter(function() {\n\t\t\t\t\t\t\t\t\treturn $(this).data('id') == id;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// remove old element\n\t\t\t\t\t\t\t\t$match.remove();\n\n\t\t\t\t\t\t\t\t// insert\n\t\t\t\t\t\t\t\tif(injectMethod == 'append') {\n\t\t\t\t\t\t\t\t\t$(element).append($new);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(element).append($new);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if(listType == 'grouped') {\n\t\t\t\t\t\t\t$loaded.each(function() {\n\t\t\t\t\t\t\t\tvar $new = $(this);\n\n\t\t\t\t\t\t\t\t// insert\n\t\t\t\t\t\t\t\tif(injectMethod == 'append') {\n\t\t\t\t\t\t\t\t\t$(element).append($new);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(element).append($new);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// get final list and make groups unique\n\t\t\t\t\t\t\t// collect all keys\n\t\t\t\t\t\t\tvar $groups = $(element).children();\n\t\t\t\t\t\t\tvar groups = {};\n\t\t\t\t\t\t\tvar prev = '';\n\t\t\t\t\t\t\tvar i = -1;\n\t\t\t\t\t\t\tvar j = -1;\n\t\t\t\t\t\t\t$groups.each(function() {\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tvar curr = $(this).data('key');\n\t\t\t\t\t\t\t\tif(prev != curr) {\n\t\t\t\t\t\t\t\t\tprev = curr;\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t\tgroups[i] = [];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tgroups[i].push(j);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfor(var key in groups) {\n\t\t\t\t\t\t\t\tvar sub = groups[key];\n\t\t\t\t\t\t\t\tfor(var key2 in sub) {\n\t\t\t\t\t\t\t\t\tvar s = sub[key2];\n\t\t\t\t\t\t\t\t\tvar $target = $($groups.get(key));\n\t\t\t\t\t\t\t\t\tvar $source = $($groups.get(s));\n\t\t\t\t\t\t\t\t\t$source.find('.itemlist__item').appendTo($target.find('ul'));\n\t\t\t\t\t\t\t\t\t$source.remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// trigger\n\t\t\t\t\t\tvar $loadedTrigger = $(data).find(trigger);\n\t\t\t\t\t\tvar loadMore = $loadedTrigger.hasClass('load-more');\n\n\t\t\t\t\t\t// set pagination\n\t\t\t\t\t\tplugin.setPagination(loadMore);\n\n\t\t\t\t\t\t// trigger callback\n\t\t\t\t\t\tcallback($loaded, $(element));\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t// trigger\n\t\t\t\t\t\tvar $trigger = $(trigger);\n\t\t\t\t\t\t$trigger.removeClass('--loading');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// refresh\n\t\t\t$(this.element).on('refresh', function() {\n\t\t\t\tplugin.setPagination();\n\t\t\t});\n\t\t},\n\n\t\tsetPagination: function(loadMore) {\n\t\t\tloadMore = (loadMore !== false);\n\n\t\t\t// trigger\n\t\t\tvar trigger = this.options.trigger;\n\t\t\tvar $trigger = $(trigger);\n\n\t\t\t// collection\n\t\t\tvar element = this.element;\n\n\t\t\tvar perpage = $trigger.data('perpage');\n\t\t\tvar total = $(element).is('.loadmore__container') ?\n\t\t\t\t$(element).find('> .itemlist__item').size() :\n\t\t\t\t$(element).find('.loadmore__container > .itemlist__item').size();\n\t\t\tvar nextPage = Math.ceil((total + 1) / perpage);\n\n\t\t\t// set href\n\t\t\tvar href = $trigger.attr('href');\n\t\t\thref = href.replace(/page=[0-9]+/, 'page=' + nextPage);\n\t\t\t$trigger.attr('href', href);\n\n\t\t\t// load more\n\t\t\tif(loadMore === false) {\n\t\t\t\t$trigger.css('display', 'none');\n\t\t\t} else if(loadMore === true) {\n\t\t\t\t$trigger.css('display', 'inline-block');\n\t\t\t}\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * menu.js\n */\njQuery(function($) {\n\t$('#layout-header').on('tap click', '.logo', function(e) {\n\t\te.preventDefault();\n\t\t$('#layout-header .menu').toggleClass('--active'); // fix selector\n\t});\n\n\t$('#layout-header').on('tap click', '.menu .menu__underlay, .menu .logo', function(e) {\n\t\te.preventDefault();\n\t\t$('#layout-header .menu').trigger('close'); // fix selector\n\t});\n\n\t$('#layout-header').on('close', '.menu', function() {\n\t\t$(this).removeClass('--active');\n\t});\n});","/**\n * orientate.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Function for orientating images\n */\n;(function($, window, document, undefined) {\n\n\t// Extend\n\t$.fn.extend({\n\t\torientate: function(orientation) {\n\t\t\tvar img = this;\n\t\t\tvar angle = 0;\n\t\t\tvar flip = false;\n\t\t\tswitch(orientation) {\n\t\t\t\tcase 2:\n\t\t\t\t\tflip = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tangle = 180;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tangle = 180;\n\t\t\t\t\tflip = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tangle = 270;\n\t\t\t\t\tflip = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tangle = 270;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\tangle = 90;\n\t\t\t\t\tflip = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tangle = 90;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$(img).rotateLeft(angle);\n\t\t}\n\t});\n\n})(jQuery, window, document);","/**\n * preview.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * {\n *   'parent': selector | object | data-update,\n *   'map': {\n *     'field_name': function(source, target, value){ //DOM manipulation } | function(source, target, value){ $(target).text(value) }\n *   }\n * }\n *\n * data-update=\"something\"\n *\n * 1. find element with id \"something\"\n * 2. find element with name \"something\"\n * 3. find element with class \"something\"\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'preview',\n\t\tdefaults = {\n\t\t\tparent: null, // will resolve to called object's \"update\" value by default\n\t\t\tmap: {}, // override fefault syncing behaviour per input field\n\t\t\tdefaultFn: function(source, target, value, e){ $(target).text(value); } // called when input field is modified\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// monitor input elements\n\t\t\t$(this.element).on('change keyup keydown file-select', ':input', function(e, fileUrl) {\n\t\t\t\tvar $source = $(this);\n\t\t\t\tvar name    = $source.attr('name');\n\t\t\t\tvar value   = $source.val();\n\t\t\t\tvar $target = plugin.resolveTargets($source);\n\n\t\t\t\t// file consolidating\n\t\t\t\tvar files = e.target.files;\n\t\t\t\tif(files !== undefined && files !== null) {\n\t\t\t\t\tfor(var i = 0, f; f = files[i]; i++) {\n\t\t\t\t\t\tvar URLObject = window.URL || window.webkitURL;\n\t\t\t\t\t\tvar objectUrl = URLObject.createObjectURL(f);\n\t\t\t\t\t\tvalue = objectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(typeof(fileUrl) !== 'undefined') {\n\t\t\t\t\tvalue = fileUrl;\n\t\t\t\t}\n\n\t\t\t\t// Get map key\n\t\t\t\tvar map = plugin.resolveMap(name);\n\t\t\t\tvar vars = plugin.resolveVars([$source, $target, value, e], name, map);\n\n\t\t\t\tvar $fn = plugin.options.map[map] || plugin.options.defaultFn || null;\n\t\t\t\tif($target != null && $fn != null) {\n\t\t\t\t\t$fn.apply(this, vars);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// disable interactivity in preview pane\n\t\t\tvar $parent = this.resolveParent();\n\t\t\t$parent.on('click', '*', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\n\t\tresolveMap: function(sourceName) {\n\t\t\tvar plugin = this;\n\t\t\tvar currSource = sourceName;\n\t\t\tif(sourceName in plugin.options.map) {\n\t\t\t\treturn sourceName;\n\t\t\t}\n\n\t\t\t// Get elements for source and all mappings\n\t\t\tvar sourceMatches = currSource.match(/(\\[[0-9a-zA-Z\\-\\_]+\\])/g); // [\"[0]\", \"[file]\", \"[test]\", \"[test33]\"]\n\n\t\t\tvar mapMatches = [];\n\t\t\tvar j = 0;\n\t\t\tfor(var key in plugin.options.map) {\n\t\t\t\tvar matches = key.match(/\\[((\\{\\$)?[0-9a-zA-Z\\-\\_]+(\\})?\\])/g); // [\"[{$index}]\", \"[file]\", \"[{$test}]\", \"[{$test2}]\"]\n\t\t\t\tif(matches != null && sourceMatches != null && matches.length === sourceMatches.length) {\n\t\t\t\t\tmapMatches[j] = {score: ',', matches: matches, name: key};\n\t\t\t\t}\n\t\t\t\tj++;\n\t\t\t}\n\n\t\t\t// score matches\n\t\t\t// - exact matches: 2, partial matches: 1, no matches: 0 (will be disqualified)\n\t\t\t// - elements closer to root will take precedence\n\t\t\tfor(var i in sourceMatches) {\n\t\t\t\tvar sourceMatch = sourceMatches[i];\n\t\t\t\tfor(var j in mapMatches) {\n\t\t\t\t\tvar mapMatch = mapMatches[j].matches[i];\n\n\t\t\t\t\tif(mapMatches[j].score == ',0') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t// if exact match\n\t\t\t\t\telse if(mapMatch === sourceMatch) {\n\t\t\t\t\t\tmapMatches[j].score += 2;\n\t\t\t\t\t}\n\t\t\t\t\t// if partial match (such as a variable)\n\t\t\t\t\telse if(/\\{\\$[0-9a-zA-Z\\-\\_]+\\}/.test(mapMatch) === true) {\n\t\t\t\t\t\tmapMatches[j].score += 1;\n\t\t\t\t\t}\n\t\t\t\t\t// if no match\n\t\t\t\t\telse {\n\t\t\t\t\t\tmapMatches[j].score = ',0';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// sort and get first result\n\t\t\tif(mapMatches.length) {\n\t\t\t\tmapMatches.sort(function(a, b) {\n\t\t\t\t\treturn a.score.replace(',', '') < b.score.replace(',', '');\n\t\t\t\t});\n\t\t\t\tvar match = mapMatches.shift();\n\t\t\t\tif(match.score != ',0') {\n\t\t\t\t\treturn match.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn sourceName;\n\t\t},\n\n\t\tresolveVars: function(vars, sourceName, mapName) {\n\t\t\tvar sourceVars = sourceName.match(/\\[([0-9a-zA-Z\\-\\_]+\\])/g);\n\t\t\tvar mapVars    = mapName.match(/\\[((\\{\\$)?[0-9a-zA-Z\\-\\_]+(\\})?\\])/g);\n\t\t\tfor(var i in sourceVars) {\n\t\t\t\tif(sourceVars[i] !== mapVars[i]) {\n\t\t\t\t\tvars.push(sourceVars[i].replace('[', '').replace(']', ''));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn vars;\n\t\t},\n\n\t\tresolveParent: function() {\n\t\t\tvar selector = this.options.parent || $(this.element).data('update');\n\t\t\tif(selector) {\n\t\t\t\tvar parent = $('#' + selector).get(0) || $('[name=' + selector + ']').get(0) || $('.' + selector).get(0) || null;\n\t\t\t\treturn $(parent);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tresolveTargets: function($source) {\n\t\t\tvar $parent = this.resolveParent();\n\t\t\tvar selector = $source.data('update');\n\t\t\tif($parent != null && selector && selector.length > 0) {\n\t\t\t\tvar target = $parent.find('#' + selector);\n\t\t\t\tif(!target.length) {\n\t\t\t\t\ttarget = $parent.find('[name=' + selector + ']');\n\t\t\t\t}\n\t\t\t\tif(!target.length) {\n\t\t\t\t\ttarget = $parent.find('.' + selector);\n\t\t\t\t}\n\t\t\t\tif(!target.length) {\n\t\t\t\t\ttarget = null;\n\t\t\t\t}\n\t\t\t\treturn target;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * slider.js\n */\njQuery(function($) {\n\t/**\n\t * options\n\t * - orientation: horizontal|vertical (default: horizontal)\n\t * - min: integer (default: 0)\n\t * - max: integer (default: 100)\n\t * - increment: integer (default: 1)\n\t * - spacing: integer (default: 0)\n\t * keyboard events\n\t * mouse events\n\t * touch events\n\t * custom events (triggers)\n\t */\n\n\tvar slider_parent        = '.slider';\n\tvar slider_track         = '.slider__track';\n\tvar slider_progress      = '.slider__track__progress';\n\tvar slider_handle        = '.slider__handle';\n\tvar slider_value         = '.slider__value';\n\tvar slider_handle_active = '.--last-active';\n\n\t//$(slider_parent).on('mousedown', slider_handle, function(e) {\n\t$('body').on('mousedown', slider_parent + ' ' + slider_handle, function(e) {\n\t\t$(this).data('anchor', e.clientX);\n\t\t$(this).data('startpos', $(this).position().left); // try remove this dependency\n\t\t$(slider_handle).removeClass('--last-active');\n\t\t$(this).addClass('--last-active');\n\t\t$('body').addClass('dragging');\n\t});\n\n\t$('body').bind('mouseup', function() {\n\t\t$('body').removeClass('dragging');\n\t});\n\n\t// move handle by mouse\n\t$('body').bind('mousemove', function(e) {\n\t\tvar $handle = $(slider_handle + ':active').not('.--readonly');\n\t\tif($handle.length == 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get movement vector\n\t\t// negative value = moving left, positive value = moving right\n\t\tvar delta = e.clientX - $handle.data('anchor');\n\t\tmoveByDelta($handle, delta);\n\t});\n\n\t// move handle by keyboard\n\t$('body').bind('keydown', function(e) {\n\t\tvar $handle = $(slider_handle + slider_handle_active).not('.--readonly');\n\t\tif($handle.length == 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get key\n\t\tvar direction = 0;\n\t\tvar magnitude = e.shiftKey ? 3 : 1;\n\t\tvar LEFT_KEY  = 37;\n\t\tvar RIGHT_KEY = 39;\n\t\tswitch(e.which) {\n\t\t\tcase LEFT_KEY:\n\t\t\t\tdirection = -1;\n\t\t\t\tbreak;\n\t\t\tcase RIGHT_KEY:\n\t\t\t\tdirection = 1;\n\t\t\t\tbreak;\n\t\t}\n\t\tmoveByIncrements($handle, direction * magnitude);\n\t});\n\n\t// move handle by track click\n\t//$(slider_parent).on('mousedown', slider_track, function(e) {\n\t$('body').on('mousedown', slider_parent + ' ' + slider_track, function(e) {\n\t\tvar $track = $(this);\n\n\t\t// only handle explicit track clicks\n\t\tvar $handle = $track.parents(slider_parent).find(slider_handle).not('.--readonly');\n\t\tif(e.target != $track.get(0) || $handle.length == 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// get closest handle to click area\n\t\tvar pos, deltaMin, deltaMax, delta, direction;\n\t\tpos = e.clientX;\n\t\tdeltaMin = $handle.filter('.--min').length ? pos - $handle.filter('.--min').offset().left : null;\n\t\tdeltaMax = $handle.filter('.--max').length ? pos - $handle.filter('.--max').offset().left : null;\n\n\t\tif(deltaMax === null || deltaMin !== null && Math.abs(deltaMin) < Math.abs(deltaMax)) {\n\t\t\t$handle = $handle.filter('.--min');\n\t\t\tdelta = deltaMin;\n\t\t} else {\n\t\t\t$handle = $handle.filter('.--max');\n\t\t\tdelta = deltaMax;\n\t\t}\n\t\t//direction = delta < 0 ? -1 : 1;\n\n\t\t// centre handle onto mouse\n\t\tvar handleOffset = $handle.width() / 2;\n\n\t\t//moveByIncrements($handle, direction);\n\t\tmoveByOffset($handle, delta - handleOffset);\n\t});\n\n\t$('body').bind('mousedown', function(e) {\n\t\t$('body').data('mousedown-target', e.target);\n\t});\n\n\t$('body').bind('mouseup', function(e) {\n\t\tvar originalTarget = $('body').data('mousedown-target');\n\t\tif(!$(originalTarget).is(slider_handle)) {\n\t\t\t$(slider_handle).removeClass('--last-active');\n\t\t}\n\t});\n\n\tfunction getSnapSpacing($slider) {\n\t\t// spanning increment\n\t\tvar minVal = $slider.data('min') || 0;\n\t\tvar maxVal = $slider.data('max') || 100;\n\t\tvar incVal = $slider.data('increment') || 1; // advisable to choose a number that evenly divides minVal and maxVal\n\t\tvar increment = 100 / ((maxVal - minVal) / incVal);\n\t\treturn increment;\n\t}\n\n\tfunction moveByIncrements($handle, units) {\n\t\tvar $slider = $handle.parents(slider_parent);\n\t\tvar increment = getSnapSpacing($slider);\n\n\t\tvar width = $handle.parents(slider_parent).width();\n\t\tvar movePercent = increment * units;\n\t\tvar startPercent = $handle.position().left * 100 / width;\n\t\tconsole.log('start percent: ' + startPercent + ', move percent: ' + movePercent);\n\n\t\tvar nextPosition = startPercent + movePercent;\n\t\tconsole.log('next percent: ' + nextPosition);\n\n\t\tmoveByPercent($handle, nextPosition);\n\t}\n\n\tfunction moveByDelta($handle, delta) {\n\t\t// translate vector into percentage of total width of slider\n\t\tvar width = $handle.parents(slider_parent).width();\n\t\tvar movePercent = delta * 100 / width;\n\t\tvar startPercent = $handle.data('startpos') * 100 / width;\n\t\t//console.log('start percent: ' + startPercent + ', move percent: ' + movePercent);\n\n\t\tvar nextPosition = startPercent + movePercent;\n\t\t//console.log('next percent: ' + nextPosition);\n\n\t\tmoveByPercent($handle, nextPosition);\n\t}\n\n\tfunction moveByOffset($handle, offset) {\n\t\tvar width = $handle.parents(slider_parent).width();\n\t\tvar movePercent = offset * 100 / width;\n\t\tvar startPercent = $handle.position().left * 100 / width;\n\t\t//console.log('start percent: ' + startPercent + ', move percent: ' + movePercent);\n\n\t\tvar nextPosition = startPercent + movePercent;\n\t\t//console.log('next percent: ' + nextPosition);\n\n\t\tmoveByPercent($handle, nextPosition);\n\t}\n\n\tfunction moveByValue($handle, value) {\n\t\tvar $slider = $handle.parents(slider_parent);\n\t\tvar minVal = $slider.data('min') || 0;\n\t\tvar maxVal = $slider.data('max') || 100;\n\t\tvar nextPosition = (value - minVal) * 100 / (maxVal - minVal);\n\t\tmoveByPercent($handle, nextPosition);\n\t}\n\n\tfunction moveByPercent($handle, percent) {\n\t\tvar nextPosition = percent;\n\t\tvar $slider = $handle.parents(slider_parent);\n\t\tvar $progress = $handle.prev(slider_progress);\n\t\tvar increment = getSnapSpacing($slider);\n\t\tvar width = $slider.width();\n\n\t\t// snap to next increment\n\t\tvar mod = nextPosition % increment;\n\t\tvar snapping = mod >= (increment / 2) ? increment - mod : -mod;\n\t\tnextPosition += snapping;\n\t\t//console.log('next percent (snapped): ' + nextPosition);\n\n\t\t// bounds checking\n\t\tvar $min = $handle.not('.--min') ? $handle.siblings(slider_handle + '.--min') : null;\n\t\tvar $max = $handle.not('.--max') ? $handle.siblings(slider_handle + '.--max') : null;\n\t\tvar min = $min.length ? $min.position().left * 100 / width : 0;\n\t\tvar max = $max.length ? $max.position().left * 100 / width : 100;\n\n\t\t// bounds check\n\t\t// - can't go lower than 0 or min\n\t\t// - can't go higher than 100 or max\n\t\tnextPosition = Math.max(nextPosition, min);\n\t\tnextPosition = Math.min(nextPosition, max);\n\t\t//console.log('next percent (bounds check): ' + nextPosition);\n\n\t\t// spacing\n\t\tvar spacing = $slider.data('spacing') || 0;\n\t\tif(spacing > 0) {\n\t\t\tnextPosition = $min.length ? Math.max(nextPosition, min + increment * spacing) : nextPosition;\n\t\t\tnextPosition = $max.length ? Math.min(nextPosition, max - increment * spacing) : nextPosition;\n\t\t\t//console.log('next percent (spacing): ' + nextPosition);\n\t\t}\n\n\t\tvar currPosition = $handle.position().left;\n\n\t\t// update ui\n\t\t$handle.css('left', nextPosition + '%');\n\t\t$progress.css('width', nextPosition + '%');\n\n\t\tvar $input = $slider.find('input[name*=\\\\[' + ($handle.is('.--min') ? 'min' : 'max') + '\\\\]]');\n\t\tif($input.length == 0) {\n\t\t\t$input = $slider.find('input');\n\t\t}\n\t\tvar $value = $input.prev(slider_value);\n\n\t\t// update values\n\t\tvar minVal = $slider.data('min') || 0;\n\t\tvar maxVal = $slider.data('max') || 100;\n\t\tvar constant = minVal;\n\t\tvar linear   = (maxVal - minVal) * nextPosition / 100;\n\t\tvar value = linear + constant;\n\t\t//console.log('value: ' + value);\n\n\t\t// round to 2 decimal places (see below)\n\t\tvalue = roundToTwo(value);\n\n\t\t// trigger custom event handlers\n\t\t// returning false will stop the value getting saved\n\t\tvar returnValue = $slider.triggerHandler('before-change', [$handle, $input, $value, value]);\n\t\tif(returnValue !== undefined) {\n\t\t\tvalue = returnValue;\n\t\t}\n\t\tif(value !== false) {\n\t\t\t$input.val(value);\n\t\t\t$value.text(value);\n\n\t\t\t$slider.trigger('change', [$handle, $input, $value, value]);\n\n\t\t\t// center value\n\t\t\tvar margin = $value.outerWidth() / 2 * -1 + 2;\n\t\t\t$value.css('left', nextPosition + '%');\n\t\t\t$value.css('margin-left', margin);\n\t\t}\n\t}\n\n\t// init function\n\tsliderInit = function($sliders) {\n\t\t$sliders.find(slider_handle).each(function() {\n\t\t\tvar $handle = $(this);\n\t\t\tvar $input = $handle.parents(slider_parent).find('input[name*=\\\\[' + ($handle.is('.--min') ? 'min' : 'max') + '\\\\]]');\n\t\t\tif($input.length == 0) {\n\t\t\t\t$input = $handle.parents(slider_parent).find('input');\n\t\t\t}\n\t\t\tmoveByValue($handle, $input.val());\n\t\t});\n\n\t\t// https://github.com/valtido/jQuery-mutate\n\t\t$sliders.find(slider_value).mutate('show', function(el, info) {\n\t\t\tvar $value = $(el);\n\t\t\tvar $handle = $value.next(slider_handle);\n\n\t\t\t// center value\n\t\t\tvar margin = $value.outerWidth() / 2 * -1 + 2;\n\t\t\t$value.css('left', $handle.css('left') + '%');\n\t\t\t$value.css('margin-left', margin);\n\t\t});\n\t}\n});\nvar sliderInit;\n\nfunction roundToTwo(num) {\n\treturn +(Math.round(num + \"e+2\")  + \"e-2\");\n}\n","/**\n * splash.js\n */\njQuery(function($) {\n\tvar $splash = $('<div class=\"splash\"></div>');\n\t$('body').append($splash);\n\n\tvar st = null;\n\t$splash.on('show', function() {\n\t\t$splash.addClass('--inactive');\n\t\tvar t = setTimeout(function() {\n\t\t\t$splash.addClass('--active');\n\t\t}, 50);\n\t\tst = setInterval(function() {\n\t\t\t$splash.addClass('--large');\n\t\t\tvar t2 = setTimeout(function() {\n\t\t\t\t$splash.removeClass('--large');\n\t\t\t}, 250);\n\t\t}, 3000);\n\t});\n\n\t$splash.on('hide', function() {\n\t\t$splash.removeClass('--active --large');\n\t\tvar t = setTimeout(function() {\n\t\t\t$splash.removeClass('--inactive');\n\t\t}, 200);\n\t\tclearInterval(st);\n\t\tst = null;\n\t});\n});","/**\n * tabbing.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * (no options required)\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'tabbing',\n\t\t\tdefaults = {\n\t\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// ignore\n\t\t\tif($(this.element).data('tabbing-ignore') != undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// init\n\t\t\t$(this.element).find('.tabbing__nav').each(function() {\n\t\t\t\tvar $indicator = $('<div class=\"tabbing__nav__indicator\"></div>');\n\t\t\t\t$(this).append($indicator);\n\n\t\t\t\tvar $tabbing = $(this).parents('.tabbing');\n\t\t\t\tvar target = $tabbing.data('tabbing-target');\n\t\t\t\tvar $triggers = $(':not(.tabbing) > .tabbing__nav__tab').filter(function() {\n\t\t\t\t\treturn $(this).attr('href') == '#' + target;\n\t\t\t\t});\n\t\t\t\t$triggers.on('click', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t$tabbing.trigger('before-change', [$(this)]);\n\t\t\t\t});\n\n\t\t\t\t// arbitrary triggers\n\t\t\t\tvar $extTriggers = $('.tabbing__trigger');\n\t\t\t\t$extTriggers.on('click', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t// find the matching trigger tab\n\t\t\t\t\tvar $extTrigger = $(this);\n\t\t\t\t\tvar $trigger = $('.tabbing__nav__tab, .tabbing__trigger').filter(function() {\n\t\t\t\t\t\treturn $(this).attr('href') == $extTrigger.attr('href');\n\t\t\t\t\t});;\n\t\t\t\t\t$tabbing.trigger('before-change', [$trigger]);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// handle clicks\n\t\t\t$(this.element).on('click', '.tabbing__nav__tab', function(e, $trigger) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$(this).parents('.tabbing').trigger('before-change', [$(this)]);\n\t\t\t});\n\n\t\t\t// event entry\n\t\t\t$(this.element).on('before-change', function(e, $trigger) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// update history\n\t\t\t\tif(history.pushState) {\n\t\t\t\t\tif($trigger.parents('.tabbing').data('scheme')) {\n\t\t\t\t\t\tvar tab = $trigger.attr('href').replace('#tab_', '');\n\t\t\t\t\t\thistory.pushState({href: $trigger.attr('href')}, null, $trigger.parents('.tabbing').data('scheme').replace('{tab}', tab));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(this).trigger('change', [$trigger]);\n\t\t\t});\n\n\t\t\t// monitor tab changes\n\t\t\t$(this.element).on('change', function(e, $trigger) {\n\t\t\t\tif(!$trigger) {\n\t\t\t\t\t$trigger = $(this).find('.tabbing__nav .--active');\n\t\t\t\t}\n\t\t\t\tvar $indicator = $trigger.parents('.tabbing__nav').find('.tabbing__nav__indicator');\n\t\t\t\tvar init = !$indicator.is(':visible');\n\t\t\t\tif($trigger.is('.--disabled') && !init) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$trigger.parents('.tabbing__nav').find('.tabbing__nav__tab').removeClass('--active');\n\t\t\t\t$trigger.addClass('--active');\n\n\t\t\t\t// update content\n\t\t\t\t$(this).trigger('update-content');\n\n\t\t\t\tplugin.resizeTabs($(this));\n\t\t\t});\n\n\t\t\t// update content\n\t\t\t$(this.element).on('update-content', function(e, $trigger) {\n\t\t\t\tif(!$trigger) {\n\t\t\t\t\t$trigger = $(this).find('.tabbing__nav__tab.--active');\n\t\t\t\t}\n\n\t\t\t\tvar target = $trigger.attr('href');\n\t\t\t\tvar $panel = $(target);\n\t\t\t\t$panel.siblings('.tabbing__panel').removeClass('--active');\n\t\t\t\t$panel.addClass('--active');\n\t\t\t});\n\n\t\t\t// handle window resizes\n\t\t\tvar $tabbing = $(this.element);\n\t\t\t$(window).resize(function() {\n\t\t\t\t$tabbing.each(function() {\n\t\t\t\t\tplugin.resizeTabs($(this));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// init state\n\t\t\t$(this.element).trigger('change');\n\t\t},\n\n\t\tresizeTabs: function($tabbing) {\n\t\t\tvar $trigger = $tabbing.find('.tabbing__nav .--active');\n\t\t\tif($trigger.length) {\n\t\t\t\tvar $indicator = $trigger.parents('.tabbing__nav').find('.tabbing__nav__indicator').addClass('--active');\n\t\t\t\tvar width = $trigger.parents('li').outerWidth();\n\t\t\t\tvar offset = $trigger.parents('li').position().left;\n\t\t\t\t$indicator.css('width', width);\n\t\t\t\t$indicator.css('left', offset);\n\t\t\t}\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * autosuggest.js\n */\njQuery(function($) {\n\t// Auto suggest field\n\tvar autosuggest_parent       = '.field';\n\tvar autosuggest              = '.field__autosuggest';\n\tvar autosuggest_value        = '.field__autosuggest__value';\n\tvar autosuggest_results      = '.field__autosuggest__results';\n\tvar autosuggest_results_item = '.field__autosuggest__results__item';\n\n\t$(autosuggest_parent + ' ' + autosuggest).each(function() {\n\t\tvar $autosuggest = $(this);\n\t\t$autosuggest.after('<div class=\"field__autosuggest__results\"></div>');\n\t});\n\n\t$(autosuggest_parent).on('keyup keydown', autosuggest, function(e) {\n\t\tvar $autosuggest = $(this);\n\t\tvar value = $autosuggest.val();\n\n\t\tif(value.length >= 3) {\n\t\t\t$autosuggest.trigger('update', [QUESTIONS, value]);\n\t\t} else {\n\t\t\t$autosuggest.parents(autosuggest_parent).trigger('close');\n\t\t}\n\t});\n\n\t$(autosuggest_parent).on('click', autosuggest, function(e) {\n\t\tvar $field = $(this).parents(autosuggest_parent);\n\t\t$field.trigger('open');\n\t});\n\n\t$(autosuggest_parent).on('update', autosuggest, function(e, data, keyword) {\n\t\tvar $autosuggest = $(this);\n\t\tvar $results = $autosuggest.next(autosuggest_results);\n\t\t$results.addClass('--active');\n\n\t\t// populate rows, using question as an example\n\t\tvar $list = $('<div class=\"itemlist\"><ul></ul></div>');\n\t\t$results.empty();\n\t\t$results.append($list);\n\t\tfor(var i in data) {\n\t\t\tvar row = data[i];\n\t\t\t//var text = row.question + '|' + row.answer;\n\n\t\t\tvar regex = new RegExp('(' + keyword + ')', 'gi');\n\t\t\tvar text = row.question.replace(regex, '<strong>$1</strong>');\n\n\t\t\tvar $row = $('<li class=\"field__autosuggest__results__item\"></li>')\n\t\t\t\t\t.html('<div class=\"question\"><span class=\"question__search\">' + text + '</span>' +\n\t\t\t\t\t\t'<span class=\"question__id\">#' + htmlEntities(row.id) + '</span></div>');\n\t\t\t$row.appendTo($list.find('ul'));\n\t\t}\n\t});\n\n\t$(autosuggest_parent).bind('open', function() {\n\t\t$(this).find(autosuggest_results).addClass('--active');\n\t});\n\n\t$(autosuggest_parent).bind('close', function() {\n\t\t$(this).find(autosuggest_results).removeClass('--active');\n\t});\n\n\t// hit test for close\n\t$('body').bind('hit-test', function(e, elements) {\n\t\t$('.field:has(.field__autosuggest)').each(function() {\n\t\t\tvar $field = $(this);\n\t\t\tif($.inArray($field.get(0), elements) == -1) {\n\t\t\t\t$field.trigger('close');\n\t\t\t}\n\t\t});\n\t});\n});\n\nfunction htmlEntities(str) {\n\treturn String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}","/**\n * collection.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Plugin for collection objects\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'collection',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// Fancy collection editor\n\t\t\tvar collection_parent  = '.field';\n\t\t\tvar collection         = '.field__collection';\n\t\t\tvar collection_item    = '.field__collection__item';\n\t\t\tvar collection_remove  = '.field__collection__item__remove';\n\t\t\tvar collection_undo    = '.field__collection__item__undo';\n\t\t\tvar collection_action  = '.field__collection__item__action';\n\t\t\tvar collection_add     = '.field__collection__add';\n\t\t\tvar collection_input   = 'input';\n\t\t\tvar collection_deleted = '.field__collection__item__deleted';\n\n\t\t\t$(this.element).each(function() {\n\t\t\t\tvar $collection = $(this);\n\t\t\t\tvar name = $collection.data('field-name');\n\t\t\t\t$collection.find(collection_item).each(function() {\n\t\t\t\t\tvar $item = $(this);\n\t\t\t\t\t$('<button type=\"button\" class=\"field__collection__item__remove fa fa-times\" title=\"Remove\"></button>').appendTo($item);\n\t\t\t\t\t$('<button type=\"button\" class=\"field__collection__item__undo fa fa-undo\" title=\"Undo\"></button>').appendTo($item);\n\t\t\t\t\tif($item.find(collection_input).val().length == 0 || $item.hasClass('--new')) {\n\t\t\t\t\t\t$item.data('clean', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// add default collection's fresh callback\n\t\t\t\t$collection.data('fresh-callback', function($item) {\n\t\t\t\t\tvar fresh = true;\n\t\t\t\t\t$item.find(':input').each(function() {\n\t\t\t\t\t\tvar $input = $(this);\n\t\t\t\t\t\tvar checkbable = $input.is('[type=checkbox], [type=radio]');\n\t\t\t\t\t\tif((checkbable && $input.prop('checked') == true) || ($input.val() != '' && !checkbable)) {\n\t\t\t\t\t\t\tfresh = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn fresh;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// enter key on collection inputs\n\t\t\t$(this.element).on('keyup keydown', collection_input, function(e) {\n\n\t\t\t\t// is last input field?\n\t\t\t\tvar $curr = $(this);\n\t\t\t\tvar $last = $curr.parents(collection_item).find(collection_input + ':last');\n\n\t\t\t\t// add\n\t\t\t\tif(e.which == 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t// if not last, do nothing\n\t\t\t\t\tif($curr.get(0) == $last.get(0)) {\n\t\t\t\t\t\t$curr.parents(collection).trigger('additem');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// remove\n\t\t\t\telse {\n\t\t\t\t\t$curr.parents(collection).trigger('reduce');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(this.element).on('click', collection_remove, function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar $item = $(this).parents(collection_item);\n\n\t\t\t\t// manage deleted resource\n\t\t\t\tif($item.data('id') != undefined) {\n\t\t\t\t\tvar deleted = $item.data('id');\n\t\t\t\t\tvar $deleted = $item.parents(collection).siblings(collection_deleted);\n\t\t\t\t\tif($deleted.val().length == 0) {\n\t\t\t\t\t\t$deleted.val(',');\n\t\t\t\t\t}\n\t\t\t\t\tvar value = $deleted.val();\n\t\t\t\t\t$deleted.val(value + deleted + ',');\n\t\t\t\t}\n\n\t\t\t\t// update view\n\t\t\t\tif($item.data('clean') != undefined && $item.data('clean') === true) {\n\t\t\t\t\t$item.remove();\n\t\t\t\t} else {\n\t\t\t\t\t$item.addClass('--removed');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(this.element).on('click', collection_undo, function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar $item = $(this).parents(collection_item);\n\n\t\t\t\t// manage deleted resource\n\t\t\t\tif($item.data('id') != undefined) {\n\t\t\t\t\tvar deleted = $item.data('id');\n\t\t\t\t\tvar $deleted = $item.parents(collection).siblings(collection_deleted);\n\t\t\t\t\tvar value = $deleted.val();\n\t\t\t\t\t$deleted.val(value.replace(',' + deleted + ',', ','));\n\t\t\t\t}\n\n\t\t\t\t// update view\n\t\t\t\t$item.removeClass('--removed');\n\t\t\t});\n\n\t\t\t$(this.element).on('click', collection_action, function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar href = $(this).attr('href');\n\t\t\t\tvar internal = !!$(this).data('internal');\n\n\t\t\t\tif(internal) {\n\t\t\t\t\t$('body').trigger('redirect', [href]);\n\t\t\t\t} else {\n\t\t\t\t\twindow.location = href;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(this.element).next(collection_add).on('click', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar $collection = $(this).prev(collection);\n\t\t\t\t$collection.trigger('additem');\n\t\t\t});\n\n\t\t\t// actions\n\n\t\t\t$(this.element).on('additem', function(e) {\n\t\t\t\tvar $collection = $(this);\n\n\t\t\t\t// get limit\n\t\t\t\tvar limit = $(this).data('collection-limit') || false;\n\t\t\t\tvar $items = $collection.find(collection_item + ':not(.--template)');\n\n\t\t\t\t// check limit against collection\n\t\t\t\tif(limit !== false && $items.size() >= limit) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// detect fresh\n\t\t\t\tvar $fresh = $items.filter(function() {\n\t\t\t\t\tvar fn = $collection.data('fresh-callback');\n\t\t\t\t\tif(fn == undefined || fn == null) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn fn($(this));\n\t\t\t\t});\n\t\t\t\tif($fresh.length) {\n\t\t\t\t\t// select it\n\t\t\t\t\t$fresh.first().trigger('_select');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar $new = $collection.find(collection_item + '.--template').clone();\n\t\t\t\t$new.removeClass('--template');\n\t\t\t\t$new.addClass('--new');\n\t\t\t\t$new.data('clean', true);\n\n\t\t\t\t// change template to new\n\t\t\t\t$new.find(':input').each(function() {\n\t\t\t\t\tif($(this).attr('name') != undefined) {\n\t\t\t\t\t\t$(this).attr('name', $(this).attr('name').replace(/\\[template\\]/, '[new]'));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$new.appendTo($collection);\n\n\t\t\t\t// reindex\n\t\t\t\t$collection.trigger('reindex');\n\n\t\t\t\t// select\n\t\t\t\t$new.trigger('_select');\n\t\t\t});\n\n\t\t\t$(this.element).on('_select', collection_item, function(e) {\n\t\t\t\tvar $item = $(this);\n\t\t\t\t$item.find(collection_input + ':visible:first').focus();\n\t\t\t});\n\n\t\t\t$(this.element).on('reduce', function(e) {\n\t\t\t\t// detect fresh\n\t\t\t\tvar $collection = $(this);\n\t\t\t\tvar $fresh = $collection.find(collection_item + ':not(.--template)').filter(function() {\n\t\t\t\t\tvar fn = $collection.data('fresh-callback');\n\t\t\t\t\tif(fn == undefined || fn == null) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn fn($(this));\n\t\t\t\t});\n\t\t\t\tif($fresh.size() > 1) {\n\t\t\t\t\t$fresh.last().remove();\n\t\t\t\t\t$collection.trigger('reduce');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(this.element).on('reindex', function(e) {\n\t\t\t\tvar $collection = $(this);\n\t\t\t\t//var $items = $collection.find(collection_item + ':not(.--template)');\n\t\t\t\tvar $items = $collection.find(collection_item + '.--new');\n\n\t\t\t\t$items.each(function(index) {\n\t\t\t\t\t// generate id\n\t\t\t\t\tvar id = index;\n\t\t\t\t\t$(this).find(':input').each(function() {\n\t\t\t\t\t\tif($(this).attr('name') != undefined) {\n\t\t\t\t\t\t\t$(this).attr('name', $(this).attr('name').replace(/\\[[0-9]+\\]/, '[' + id + ']'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * formchanged.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Plugin for detecting changes in forms\n */\n/*;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'formchanged',\n\t\tdefaults = {\n\t\t\tleaveMessage: 'Are you sure you want to leave this page?'\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar $form = $(this.element);\n\t\t\t$form.data('snapshot', plugin.snapshot());\n\n\t\t\t// detect submit\n\t\t\t$form.on('submit', function() {\n\t\t\t\t$form.data('submitting', true);\n\t\t\t});\n\n\t\t\t// leave page\n\t\t\twindow.addEventListener(\"beforeunload\", function(e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\tvar snapshot = plugin.snapshot();\n\t\t\t\tif($form.data('snapshot') != snapshot && ($form.data('submitting') == undefined || $form.data('submitting') !== true)) {\n\t\t\t\t\tvar txt;\n\t\t\t\t\tvar r = confirm(\"Press a button!\");\n\t\t\t\t\tif(r == true) {\n\t\t\t\t\t\ttxt = \"You pressed OK!\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttxt = \"You pressed Cancel!\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tsnapshot: function() {\n\t\t\tvar plugin = this;\n\t\t\tvar serialised = '';\n\t\t\t$(this.element).find(':input').each(function() {\n\t\t\t\tserialised += '&' + $(this).attr('name') + '=' + $(this).val();\n\t\t\t});\n\t\t\treturn serialised;\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);*/","/**\n * liveform.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Plugin for live-form objects\n *\n * Dependencies:\n * _parse.js\n */\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'liveform',\n\t\tdefaults = {\n\t\t\tdata:  {}, // the data source for querying\n\t\t\tquery: function(form_params, data_source) {}, // the query function\n\t\t\tview:  function(results) {} // the view rendering function\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// form submission\n\t\t\t$(this.element).on('submit', function(e) {\n\t\t\t\t// form submissions will be disabled.\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t\t// input change\n\t\t\t$(this.element).on('change keyup', ':input', function() {\n\t\t\t\tplugin.update();\n\t\t\t});\n\t\t},\n\n\t\tupdate: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// get params\n\t\t\tvar params = $(this.element).parse(); // call dependent plugin function\n\n\t\t\t// get result set\n\t\t\tvar result = plugin.options.query(params, plugin.options.data);\n\n\t\t\t// update view\n\t\t\tplugin.options.view(result);\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);","/**\n * parse.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Function for parsing form objects into JSON\n */\n;(function($, window, document, undefined) {\n\n\t// Extend\n\t$.fn.extend({\n\t\tparse: function() {\n\n\t\t\t// helper\n\t\t\tvar buildProp = function(obj, props, value) {\n\t\t\t\tvar plugin = this;\n\t\t\t\tvar prop = props.shift();\n\t\t\t\tif(props.length) {\n\t\t\t\t\tif(prop == '') {\n\t\t\t\t\t\tvar i = -1;\n\t\t\t\t\t\tfor(var prop in obj) {\n\t\t\t\t\t\t\tif(/^[0-9]+$/g.test(prop) === true) {\n\t\t\t\t\t\t\t\ti = Math.max(i, prop);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobj[++i] = {};\n\t\t\t\t\t\tbuildProp(obj[i], props, value)\n\t\t\t\t\t} else if(obj[prop]) {\n\t\t\t\t\t\tbuildProp(obj[prop], props, value)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj[prop] = {};\n\t\t\t\t\t\tbuildProp(obj[prop], props, value)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tobj[prop] = value;\n\t\t\t\t}\n\t\t\t\treturn obj;\n\t\t\t};\n\n\t\t\t// method\n\t\t\treturn (function(form) {\n\t\t\t\tvar config = {};\n\t\t\t\t$(form).serializeArray().map(function(item) {\n\t\t\t\t\tvar props = item.name.replace(/\\]\\[/g, '~').replace(/\\[/g, '~').replace(/\\]/g, '').split('~');\n\t\t\t\t\tconfig = buildProp(config, props, item.value);\n\t\t\t\t});\n\t\t\t\treturn config;\n\t\t\t})(this);\n\t\t}\n\t});\n\n})(jQuery, window, document);","/**\n * realval.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Function getting the real value of an input field, supports html5 contenteditor attribute\n */\n;(function($, window, document, undefined) {\n\n\t// Extend\n\t$.fn.extend({\n\t\t// used in actual form submission\n\t\trealVal: function() {\n\t\t\tvar $input = $(this);\n\t\t\tvar isHtml = !$input.is(':input');\n\t\t\tvar val = $input.html();\n\n\t\t\t// method\n\t\t\tif(isHtml) {\n\t\t\t\t// 1. new lines instead of div/p rows (wrapped)\n\t\t\t\t// 2. new lines instead of div/p rows (unwrapped)\n\t\t\t\t// 3. remove div/p end tags\n\t\t\t\t// 4. trim off first new line\n\t\t\t\tvar html = $input.html().replace(/<\\/div><div>/g, \"\\n\").replace(/<\\/p><p>/g, \"\\n\").replace('<div>', \"\\n\").replace('<p>', \"\\n\").replace('</div>', '').replace('</p>', '').replace(\"\\n\", '');\n\t\t\t\treturn html;\n\t\t\t}\n\t\t\treturn isHtml ? $input.text() : $input.val();\n\t\t},\n\t\t// used in counting number of characters\n\t\trealText: function() {\n\t\t\tvar $input = $(this);\n\t\t\tvar isHtml = !$input.is(':input');\n\t\t\tvar val = $input.html();\n\n\t\t\t// method\n\t\t\tif(isHtml) {\n\t\t\t\t// 1. new lines between div/p rows (wrapped)\n\t\t\t\t// 2. new lines between div/p rows (unwrapped)\n\t\t\t\t// 3. trim off first new line\n\t\t\t\tvar html = $input.html().replace(/<\\/div><div>/g, \"</div>\\n<div>\").replace(/<\\/p><p>/g, \"</p>\\n<p>\").replace('<div>', \"\\n<div>\").replace('<p>', \"\\n<p>\").replace(\"\\n\", '');\n\t\t\t\tvar $html = $('<div></div>').html(html);\n\t\t\t\treturn $html.text();\n\t\t\t}\n\t\t\treturn isHtml ? $input.text() : $input.val();\n\t\t},\n\t\t// used in calculating textarea height\n\t\trealHtml: function() {\n\t\t\tvar $input = $(this);\n\t\t\tvar isHtml = !$input.is(':input');\n\n\t\t\t// method\n\t\t\treturn isHtml ? $input.html() : $input.val();\n\t\t}\n\t});\n\n})(jQuery, window, document);","/**\n * textarea.js\n */\n\n//https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js\n/*!\n * jQuery lightweight plugin boilerplate\n * Original author: @ajpiano\n * Further changes, comments: @addyosmani\n * Licensed under the MIT license\n */\n/**\n * Plugin for textarea objects\n */\nfunction getSelectRange() {\n\tif(window.getSelection) {\n\t\tsel = window.getSelection();\n\t\tif(sel.rangeCount) {\n\t\t\trange = sel.getRangeAt(0);\n\t\t}\n\t} else if(document.selection && document.selection.createRange) {\n\t\trange = document.selection.createRange();\n\t}\n\treturn range;\n}\nfunction getCaretInfo() {\n\tvar sel;\n\tif(window.getSelection) {\n\t\tsel = window.getSelection();\n\t} else if(document.selection) {\n\t\tsel = document.selection;\n\t}\n\n\t// build\n\tvar node = sel.anchorNode;\n\tvar parent = node ? $(node).parent().get(0) : null;\n\treturn {\n\t\tstartPos: sel.anchorOffset,\n\t\tnode: node,\n\t\tparent: parent,\n\t};\n}\nfunction getCaretPosition(editableDiv) {\n\tvar caretPos = 0, sel, range;\n\tif(window.getSelection) {\n\t\tsel = window.getSelection();\n\t\tif(sel.rangeCount) {\n\t\t\trange = sel.getRangeAt(0);\n\t\t\tif (range.commonAncestorContainer.parentNode == editableDiv) {\n\t\t\t\tcaretPos = range.endOffset;\n\t\t\t}\n\t\t}\n\t} else if(document.selection && document.selection.createRange) {\n\t\trange = document.selection.createRange();\n\t\tif(range.parentElement() == editableDiv) {\n\t\t\tvar tempEl = document.createElement(\"span\");\n\t\t\teditableDiv.insertBefore(tempEl, editableDiv.firstChild);\n\t\t\tvar tempRange = range.duplicate();\n\t\t\ttempRange.moveToElementText(tempEl);\n\t\t\ttempRange.setEndPoint(\"EndToEnd\", range);\n\t\t\tcaretPos = tempRange.text.length;\n\t\t}\n\t}\n\treturn caretPos;\n}\nfunction getCaretObject(editableDiv)\n{\n\tvar caretObj, sel, range;\n\tif(window.getSelection) {\n\t\tsel = window.getSelection();\n\t\tif(sel.rangeCount) {\n\t\t\trange = sel.getRangeAt(0);\n\t\t\tcaretObj = range.commonAncestorContainer.parentNode;\n\t\t}\n\t} else if(document.selection && document.selection.createRange) {\n\t\trange = document.selection.createRange();\n\t\tcaretObj = range.parentElement();\n\t}\n\treturn caretObj;\n}\nfunction focusTextNode(node)\n{\n\tvar sel = window.getSelection();\n\tvar range = sel.getRangeAt(0);\n\trange.collapse(false);\n\trange = range.cloneRange();\n\trange.selectNodeContents(node.get(0));\n\trange.collapse(false);\n\tsel.removeAllRanges();\n\tsel.addRange(range);\n}\n;(function($, window, document, undefined) {\n\n\t// Create the defaults once\n\tvar pluginName = 'textarea',\n\t\tdefaults = {\n\t\t};\n\n\t// The actual plugin constructor\n\tfunction Plugin(element, options) {\n\t\tthis.element = element;\n\n\t\t// merge options\n\t\tthis.options = $.extend({}, defaults, options);\n\n\t\tthis._defaults = defaults;\n\t\tthis._name = pluginName;\n\n\t\tthis.init();\n\t}\n\n\tPlugin.prototype = {\n\n\t\t// Place initialization logic in here\n\t\tinit: function() {\n\t\t\tvar plugin = this;\n\n\t\t\t// medium\n\t\t\tif($(this.element).is('[contenteditable=true]')) {\n\t\t\t\tnew Medium({\n\t\t\t\t\telement: this.element,\n\t\t\t\t\tmode: Medium.richMode, // partialMode\n\t\t\t\t\tplaceholder: $(this.element).data('placeholder') || $(this.element).attr('placeholder') || '',\n\t\t\t\t\ttags: {\n\t\t\t\t\t\t'break': 'br',\n\t\t\t\t\t\t'horizontalRule': '',\n\t\t\t\t\t\t'paragraph': 'p',\n\t\t\t\t\t\t'outerLevel': [], // 'pre', 'blockquote', 'figure'\n\t\t\t\t\t\t'innerLevel': ['span', 'img'] // 'a', 'b', 'u', 'i', 'img', 'strong'\n\t\t\t\t\t},\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tremove: ['style'] // 'style', 'class'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Textarea Auto Resize\n\t\t\tvar $hiddenDiv = $('.hiddendiv').first();\n\t\t\tif(!$hiddenDiv.length) {\n\t\t\t\t$hiddenDiv = $('<div class=\"hiddendiv common\"></div>');\n\t\t\t\t$('body').append($hiddenDiv);\n\t\t\t}\n\n\t\t\t$(this.element).each(function() {\n\t\t\t\tvar $textarea = $(this);\n\t\t\t\t//if($textarea.val().length) {\n\t\t\t\t//if($textarea.realHtml().length) {\n\t\t\t\t\tplugin.resize($textarea);\n\t\t\t\t//}\n\t\t\t});\n\n\t\t\t$(this.element).on('keyup keydown refresh paste pastecomplete', function(e) {\n\t\t\t\tif($(this).is('[contenteditable=true]') && (e.type == 'keydown' || e.type == 'paste')) {\n\t\t\t\t\t$(this).trigger('caret');\n\t\t\t\t\tplugin.cleanupObjects(e, $(this));\n\t\t\t\t}\n\t\t\t\tplugin.resize($(this));\n\t\t\t});\n\n\t\t\t// https://github.com/valtido/jQuery-mutate\n\t\t\t$(this.element).mutate('show width', function(el, info) {\n\t\t\t\tplugin.resize($(el));\n\t\t\t});\n\n\t\t\t// object click / toggle\n\t\t\tif($(this.element).is('[contenteditable=true]')) {\n\t\t\t\t// clicking on text are is 1 trigger for caret change\n\t\t\t\t$(this.element).bind('click', function(e) {\n\t\t\t\t\t$(this).trigger('caret');\n\t\t\t\t});\n\t\t\t\t$(this.element).bind('caret', function(e) {\n\t\t\t\t\t$(this).find('.o_').removeClass('a_ l_ _l');\n\t\t\t\t\tvar $obj = $(getCaretObject(this)); // caret position\n\t\t\t\t\tif($obj.length > 0 && $obj.is('.o_')) {\n\t\t\t\t\t\tvar pos = getCaretPosition($obj.get(0));\n\t\t\t\t\t\tif(pos == $obj.text().length) {// caret end of object\n\t\t\t\t\t\t\t$obj.addClass('l_');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(pos == 0) {// caret start of object\n\t\t\t\t\t\t\t$obj.addClass('_l');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$obj.addClass('a_');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tcleanupObjects: function(e, $textarea) {\n\t\t\tvar plugin = this;\n\t\t\tvar obj = plugin.getObjects($textarea);\n\t\t\tvar moveKeys = [35,36,37,38,39,40]; // 35 = end, 36 = home, 37 = left, 38 = up, 30 = right, 40 = down\n\t\t\tvar deleteKeys = [8,46]; // 8 = backspace, 46 = delete\n\t\t\tfor(var i in obj) {\n\t\t\t\tvar o = obj[i];\n\t\t\t\t// 8 = backspace, 46 = delete\n\t\t\t\tif(o.is('.a_') && deleteKeys.indexOf(e.which) != -1) {\n\t\t\t\t\tvar $tn = null;\n\t\t\t\t\tvar $c = $(o);\n\n\t\t\t\t\t// find nearest text node before delete target\n\t\t\t\t\tvar $pC = $(o).parents('[contenteditable] > *');\n\t\t\t\t\tvar $pB = $pC.prev();\n\t\t\t\t\tvar $tn = null;\n\t\t\t\t\tvar c = $pC.contents();\n\t\t\t\t\tvar index = $(c).index(o);\n\t\t\t\t\tfor(var j = 0; j < index; j++) {\n\t\t\t\t\t\tif($(c).get(j).nodeType == 3) {\n\t\t\t\t\t\t\t$tn = $($(c).get(j));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif($tn == null) {\n\t\t\t\t\t\t$tn = $pB;\n\t\t\t\t\t}\n\n\t\t\t\t\t// now delete node\n\t\t\t\t\t// will the parent element be empty once deleted?\n\t\t\t\t\tif($(o).parent().contents().length == 1) {\n\t\t\t\t\t\t$(o).parent().remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\to.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t// focus on text node\n\t\t\t\t\tif($tn != null) {\n\t\t\t\t\t\tfocusTextNode($tn);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t} else if(o.hasClass('a_')) {\n\t\t\t\t\t// 32 = space, start of object\n\t\t\t\t\tif(e.which == 32 && o.hasClass('_l')) {\n\t\t\t\t\t\t// create text node before or add space to end of previous text node\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar $tn = $('<span>&nbsp;</span>');\n\t\t\t\t\t\tvar txt = $($tn.get(0).childNodes[0]);\n\t\t\t\t\t\to.before(txt);\n\t\t\t\t\t\tfocusTextNode(txt);\n\t\t\t\t\t\t$textarea.find('.o_').removeClass('a_ l_ _l');\n\t\t\t\t\t}\n\t\t\t\t\t// 13 = enter, start of object\n\t\t\t\t\telse if(e.which == 13 && o.hasClass('_l')) {\n\t\t\t\t\t\t// create text node after or add space to start of next text node\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar $tn = $('<div><br /></div>');\n\t\t\t\t\t\t//var p = o.parents('[contenteditable] *').last(); // get top most node that is child of contenteditable\n\t\t\t\t\t\t//p.before($tn);\n\t\t\t\t\t\to.before($tn);\n\t\t\t\t\t\tfocusTextNode($tn);\n\t\t\t\t\t\t$textarea.find('.o_').removeClass('a_ l_ _l');\n\t\t\t\t\t}\n\t\t\t\t\t// 32 = space, end of object\n\t\t\t\t\telse if(e.which == 32 && o.hasClass('l_')) {\n\t\t\t\t\t\t// create text node after or add space to start of next text node\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar $tn = $('<span>&nbsp;</span>');\n\t\t\t\t\t\tvar txt = $($tn.get(0).childNodes[0]);\n\t\t\t\t\t\to.after(txt);\n\t\t\t\t\t\tfocusTextNode(txt);\n\t\t\t\t\t\t$textarea.find('.o_').removeClass('a_ l_ _l');\n\t\t\t\t\t}\n\t\t\t\t\t// 13 = enter, end of object\n\t\t\t\t\telse if(e.which == 13 && o.hasClass('l_')) {\n\t\t\t\t\t\t// create text node after or add space to start of next text node\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar $tn = $('<div><br /></div>');\n\t\t\t\t\t\t//var p = o.parents('[contenteditable] *').last(); // get top most node that is child of contenteditable\n\t\t\t\t\t\t//p.after($tn);\n\t\t\t\t\t\to.after($tn);\n\t\t\t\t\t\tfocusTextNode($tn);\n\t\t\t\t\t\t$textarea.find('.o_').removeClass('a_ l_ _l');\n\t\t\t\t\t}\n\t\t\t\t\t// 35 = end, 36 = home, 37 = left, 38 = up, 30 = right, 40 = down, 8 = backspace, 46 = delete\n\t\t\t\t\telse if(moveKeys.indexOf(e.which) == -1 && deleteKeys.indexOf(e.which) == -1) {\n\t\t\t\t\t\te.preventDefault(); // prevent action\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar t = setTimeout(function() {\n\t\t\t\t// remove partial objects\n\t\t\t\tobj = plugin.getObjects($textarea);\n\t\t\t\tfor(i in obj) {\n\t\t\t\t\tvar o = obj[i];\n\t\t\t\t\tif(o.data('text') !== o.text()) {\n\t\t\t\t\t\to.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// strip out style tags\n\t\t\t\t$textarea.find('*[style]:not(.o_)').each(function() {\n\t\t\t\t\t$(this).get(0).removeAttribute('style');\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t},\n\n\t\tgetObjects: function($textarea) {\n\t\t\tvar obj = [];\n\t\t\t$textarea.find('.o_').each(function() {\n\t\t\t\tobj.push($(this));\n\t\t\t});\n\t\t\treturn obj;\n\t\t},\n\n\t\tresize: function($textarea) {\n\t\t\tvar plugin = this;\n\n\t\t\tif(!$(this.element).is('[contenteditable=true]')) {\n\t\t\t\tvar $hiddenDiv = $('.hiddendiv').first();\n\n\t\t\t\t$hiddenDiv.html($textarea.realHtml());\n\t\t\t\tvar content = $hiddenDiv.html().replace(/\\n/g, '<br>&nbsp;');\n\t\t\t\t$hiddenDiv.css('line-height', $textarea.css('line-height'));\n\t\t\t\t$hiddenDiv.css('font-size', $textarea.css('font-size'));\n\t\t\t\t$hiddenDiv.css('padding-top', $textarea.css('padding-top'));\n\t\t\t\t$hiddenDiv.css('padding-bottom', $textarea.css('padding-bottom'));\n\t\t\t\t$hiddenDiv.html(content);\n\t\t\t\t$hiddenDiv.css('width', $textarea.width());\n\t\t\t\t$textarea.css('height', $hiddenDiv.outerHeight());\n\t\t\t}\n\t\t}\n\t};\n\n\t// A really lightweight plugin wrapper around the constructor,\n\t// preventing against multiple instantiations\n\t$.fn[pluginName] = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif(!$.data(this, 'plugin_' + pluginName)) {\n\t\t\t\t$.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n})(jQuery, window, document);"]}